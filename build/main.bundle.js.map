{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack:///./book_api.js","webpack:///./index.js","webpack:///./main.js"],"sourcesContent":["let currentBooks = []\r\nlet container = document.querySelector('.cards');\r\nlet loadIndex = 0\r\nlet currentCategory = 'Architecture'\r\nfunction getData(subjectName) {\r\n        \r\n        axios.get(`https://www.googleapis.com/books/v1/volumes?q=\"subject:${subjectName}\"&key=AIzaSyDbbM8_tK8pqO0hytMq7qbnl7PwD8vh3S0&printType=books&startIndex=${loadIndex}&maxResults=6&langRestrict=en`)\r\n        .then(response => {\r\n        loadIndex = loadIndex +6\r\n         const result = response.data;\r\n         result.items.forEach(i => {drowCard(i);currentBooks.push(i);})\r\n            console.log(currentBooks)\r\n       \r\n        })\r\n        .catch(error => console.error(error));\r\n\r\n\r\n}\r\n\r\nfunction cart(event){\r\n    let basketValue = document.querySelector('.count-basket')\r\n    let books = localStorage.getItem('books')\r\n    if(books){\r\n        let parsed = JSON.parse(books)\r\n        if(parsed.find(b =>b.selfLink == event.currentTarget.id)){\r\n            parsed = parsed.filter(b =>b.selfLink != event.currentTarget.id)\r\n            localStorage.setItem('books',JSON.stringify(parsed))\r\n            event.currentTarget.classList.remove('in-cart')\r\n            event.currentTarget.classList.add('buy-button')\r\n            event.currentTarget.innerHTML = 'BUY NOW'\r\n            basketValue.innerHTML = Number(basketValue.innerHTML) -1\r\n            return\r\n\r\n        }\r\n        parsed.push(currentBooks.find(b =>b.selfLink == event.currentTarget.id))\r\n        basketValue.innerHTML = Number(basketValue.innerHTML) +1\r\n\r\n\r\n\r\n        localStorage.setItem('books',JSON.stringify(parsed))\r\n\r\n    }\r\n    else{        \r\n        let result = []\r\n        result.push(currentBooks.find(b =>b.selfLink == event.currentTarget.id))\r\n        result = JSON.stringify(result)\r\n        basketValue.innerHTML = Number(basketValue.innerHTML) +1\r\n        localStorage.setItem(\"books\",result)\r\n\r\n        }\r\n        event.currentTarget.classList.remove('buy-button')\r\n        event.currentTarget.classList.add('in-cart')\r\n        event.currentTarget.innerHTML = 'IN THE CART'\r\n}\r\n\r\n\r\n\r\nfunction drowCard(book){\r\n\r\n    let bookId = book.selfLink\r\n    console.log(typeof bookId)\r\n    let template = `<div class=\"card\">\r\n                        <div class=\"card-image\">\r\n                            <img src=\"${getBookImage(book)}\" class=\"pic_wrapp\" alt=\"cover\">\r\n                        </div>\r\n                        <div class=\"card-item\">\r\n                            <p class=\"autors\">${writeAutor(book)}</p> \r\n                            <p class=\"title-card\">${book.volumeInfo.title}</p> \r\n                            <div class=\"average-raitng\">${averageRating(book)}</div> \r\n                            <p class=\"raitng\">${getRaiting(book)}</p>\r\n                            <p class=\"item-card\">${writeDescription(book)}</p>\r\n                            <p class=\"price-card\">${countPrice(book)}</p> \r\n                            ${drowButton(book,bookId)}\r\n                        </div>\r\n                    </div>`\r\n\r\n    container.innerHTML = container.innerHTML + template\r\n\r\n}\r\n\r\n\r\nconst list = document.getElementById('category-list').children\r\n\r\nfunction listenCategories(){\r\nfor (let i = 0, len = list.length; i < len; i++) {\r\n    list[i].addEventListener(\"click\",e => getBooks(e,list[i].innerHTML));\r\n}\r\n\r\n}\r\nlistenCategories()\r\n\r\n\r\ngetData(\"Architecture\")\r\nlist[0].style.fontWeight = 'bold'\r\n\r\nfunction drowButton(book,bookId){\r\n    let books = JSON.parse(localStorage.getItem('books'))\r\n    console.log(books)\r\n\r\n    \r\n    if(books != null){\r\n        if(books.find(b =>b.selfLink == book.selfLink)){\r\n        return `<button class=\"in-cart\"  id=\"${bookId}\" onclick=\"cart(event)\">in the cart</button>`\r\n    }\r\n    else{\r\n        return `<button class=\"buy-button\"  id=\"${bookId}\" onclick=\"cart(event)\">by now</button>`\r\n    }\r\n\r\n    }\r\n    else{\r\n        return `<button class=\"buy-button\"  id=\"${bookId}\" onclick=\"cart(event)\">by now</button>`\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction getBooks(e,x){\r\n    currentCategory = x\r\n    container.innerHTML = ''\r\n    for (let i = 0, len = list.length; i < len; i++) {\r\n        list[i].style.fontWeight = 'normal'\r\n    }\r\n    e.target.style.fontWeight = \"bold\";\r\n//    return function(){getData(x)} \r\n    return getData(x)\r\n}\r\n\r\nfunction countPrice(book){\r\n\r\n    if(book.saleInfo.saleability == \"FOR_SALE\") {\r\n        return book.saleInfo.listPrice.amount + ' RUB'\r\n    }\r\n    else{return ''}\r\n\r\n\r\n}\r\nfunction writeAutor(book){\r\n    if(book.volumeInfo.authors){\r\n    if(book.volumeInfo.authors.length > 0){\r\n     return book.volumeInfo.authors.join(\", \")\r\n\r\n\r\n    }\r\n    else {return book.volumeInfo.authors[0]}\r\n} else{return ''}\r\n\r\n}\r\n\r\nfunction writeDescription(book){\r\nif(book.volumeInfo.description)\r\n{    \r\n    if(book.volumeInfo.description.length < 100){\r\n        return book.volumeInfo.description\r\n   \r\n   \r\n       }\r\n    else{\r\n        return book.volumeInfo.description.slice(0, 100) + ' . . . '\r\n    }}\r\n\r\n       else{\r\n        return \"\"\r\n       }\r\n}\r\n\r\nfunction getBookImage(book) {\r\n    if(book.volumeInfo.imageLinks?.thumbnail){\r\n\r\n        return book.volumeInfo.imageLinks.thumbnail\r\n    }\r\n    else{\r\n        return '/img/placeholder.png'\r\n    }\r\n    }\r\n\r\nfunction averageRating(book) {\r\n    let result = ''\r\n    for (let i = 0; i < book.volumeInfo.averageRating; i++){\r\n        result = result + '<img src=\"/img/star.svg\"/>'\r\n    }\r\n        return result\r\n    }\r\n\r\n    function getRaiting(book) {\r\n        if(book.volumeInfo?.ratingsCount){\r\n    \r\n            return book.volumeInfo.ratingsCount + \"M review\"\r\n        }\r\n        else{\r\n            return ''\r\n        }\r\n        }\r\n\r\n\r\n\r\nexport {\r\n    currentBooks,container,loadIndex,currentCategory,getData,cart,drowCard,list,listenCategories,drowButton,getBooks,countPrice,writeAutor,writeDescription,getBookImage,averageRating,getRaiting\r\n}\r\n\r\n\r\n\r\n\r\n","// Исходные данные по слайдеру (const)\r\nconst sliderImages = document.querySelectorAll('.slider__img'),\r\n    sliderLine = document.querySelector('.slider__line'),\r\n    sliderDots = document.querySelectorAll('.slider__dot'),\r\n    sliderBtnNext = document.querySelector('.slider__btn-next'),\r\n    sliderBtnPrev = document.querySelector('.slider__btn-prev');\r\n        \r\n// Переменные    \r\nlet sliderCount = 0,\r\n    sliderWidth;\r\n\r\n// Адаптивность слайдера\r\nwindow.addEventListener('resize', showSlide);\r\n\r\n// Кнопки листания слайдов вперед и назад\r\nsliderBtnNext.addEventListener('click', nextSlide);\r\nsliderBtnPrev.addEventListener('click', prevSlide);\r\n\r\n// Автоматическое перелистывание слайдов\r\nsetInterval(() => {\r\n    nextSlide()\r\n}, 5000);\r\n\r\n\r\n// Функции ==================\r\n// Задает нужную ширину картинки и sliderLine\r\nfunction showSlide() {\r\n    sliderWidth = document.querySelector('.slider').offsetWidth;\r\n    sliderLine.style.width = sliderWidth * sliderImages.length + 'px';\r\n    sliderImages.forEach(item => item.style.width = sliderWidth + 'px');\r\n\r\n    rollSlider();\r\n}\r\nshowSlide();\r\n\r\n// Перелистывает слайд вперед\r\nfunction nextSlide() {\r\n    sliderCount++;\r\n    if (sliderCount >= sliderImages.length) sliderCount = 0;\r\n\r\n    rollSlider();\r\n    thisSlide(sliderCount);\r\n}\r\n\r\n// Перелистывает слайд назад\r\nfunction prevSlide() {\r\n    sliderCount--;\r\n    if (sliderCount < 0) sliderCount = sliderImages.length -1;\r\n\r\n    rollSlider();\r\n    thisSlide(sliderCount);\r\n}\r\n\r\n// Задает шаг перемещения слайдов\r\nfunction rollSlider() {\r\n    sliderLine.style.transform = `translateX(${-sliderCount * sliderWidth}px)`;\r\n}\r\n\r\n// Указывает как слайд по счету активен\r\nfunction thisSlide(index) {\r\n    sliderDots.forEach(item => item.classList.remove('active-dot'));\r\n    sliderDots[index].classList.add('active-dot');\r\n}\r\n\r\n// Вешает клик на dot\r\nfunction listenDots(){\r\nsliderDots.forEach((dot, index) => {\r\n    dot.addEventListener('click', () => {\r\n        sliderCount = index;\r\n        rollSlider();\r\n        thisSlide(sliderCount);\r\n    })\r\n})\r\n}\r\nlistenDots()\r\n\r\nexport {\r\n    sliderImages,sliderLine,sliderBtnNext,sliderBtnPrev,sliderCount,sliderWidth,showSlide,nextSlide,prevSlide,rollSlider,thisSlide,sliderDots\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import{\r\n    currentBooks,container,loadIndex,currentCategory,getData,cart,drowCard,list,listenCategories,drowButton,getBooks,countPrice,writeAutor,writeDescription,getBookImage,averageRating,getRaiting\r\n}  from  './book_api.js'\r\nimport{\r\n    sliderImages,sliderLine,sliderBtnNext,sliderBtnPrev,sliderCount,sliderWidth,showSlide,nextSlide,prevSlide,rollSlider,thisSlide,sliderDots\r\n    \r\n}  from '/index.js'\r\n\r\nwindow.getData = getData\r\nwindow.cart =cart\r\nwindow.currentCategory = currentCategory \r\n\r\nlistenCategories()\r\n\r\n\r\ngetData(\"Architecture\")\r\nlist[0].style.fontWeight = 'bold'\r\n\r\n// Адаптивность слайдера\r\nwindow.addEventListener('resize', showSlide);\r\n\r\n// Кнопки листания слайдов вперед и назад\r\nsliderBtnNext.addEventListener('click', nextSlide);\r\nsliderBtnPrev.addEventListener('click', prevSlide);\r\n\r\n// Автоматическое перелистывание слайдов\r\nsetInterval(() => {\r\n    nextSlide()\r\n}, 5000);\r\n\r\nshowSlide();\r\nlistenDots();"],"names":["currentBooks","container","document","querySelector","loadIndex","currentCategory","getData","subjectName","axios","get","then","response","data","items","forEach","i","book","bookId","selfLink","console","log","template","volumeInfo","imageLinks","thumbnail","getBookImage","authors","length","join","writeAutor","title","result","averageRating","ratingsCount","getRaiting","description","slice","writeDescription","saleInfo","saleability","listPrice","amount","countPrice","books","JSON","parse","localStorage","getItem","find","b","drowButton","innerHTML","drowCard","push","catch","error","list","getElementById","children","listenCategories","len","addEventListener","e","getBooks","x","style","fontWeight","target","sliderImages","querySelectorAll","sliderLine","sliderDots","sliderBtnNext","sliderBtnPrev","sliderWidth","sliderCount","showSlide","offsetWidth","width","item","rollSlider","nextSlide","thisSlide","prevSlide","transform","index","classList","remove","add","window","setInterval","dot","cart","event","basketValue","parsed","currentTarget","id","filter","setItem","stringify","Number","listenDots"],"sourceRoot":""}